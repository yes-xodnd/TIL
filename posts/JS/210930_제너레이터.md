# 제너레이터 Generator

제너레이터는 ES6에 추가된 내용으로, 제너레이터를 이용하면 여러 값을 하나씩 반환하고, 함수의 실행을 중단했다가 중단지점부터 다시 실행할 수 있습니다. 

## 제너레이터 함수 generator function

제너레이터 함수를 통해 제너레이터 객체를 만들 수 있습니다. 

``` js
function* f() {
  yield 1;
  yield 2;
  return 3;
}
```

제너레이터 함수를 실행하면 제너레이터 객체를 반환합니다.

``` js
const generator = f();
```

### yield, return

 `yield` 키워드를 통해 제너레이터 함수의 실행을 중단하고, 뒤에 오는 값(또는 표현식)을 반환할 수 있습니다.

``` js
function* f() {
  console.log('Start Generator Function');
  yield 1; // 1을 반환한 후 실행을 중단합니다 
  console.log('between 1, 2');
  yield 2;
}

f().next(); // Start Generator Function
```

`yield*` 키워드는 이터러블 객체의 값을 하나씩 순회하며 반환합니다. 다른 제너레이터나 이터러블 객체에 `yield`를 위임할 때 사용합니다. 이를 제너레이터 컴포지션이라고 표현하기도 합니다. 

``` js
function* map(f, arr) {
	yield* arr.map(f);
}

const it = map(v => v * 2, [ 1, 2, 3 ]);
console.log(it.next()); // { value: 2, done: false }
```

`return` 키워드는 순회가 종료되었을 때, 처음으로 반환되는 iterator result의 `value`를 지정할 수 있습니다. `done`이 `true`가 된 이후에는 값으로 `undefined`를 반환합니다. 

``` js
const generator = (function* f() {
	yield 1;
  yield 2;
  return 100;
})();

console.log(generator.next()); // { value: 1, done : false }
console.log(generator.next()); // { value: 2, done : false }
console.log(generator.next()); // { value: 100, done : true }
console.log(generator.next());  // { value: undefined, done : true }
```



## 제너레이터 generator

제너레이터는 이터러블이면서 이터레이터인 객체입니다.

### 이터러블 iterable

제너레이터는 `Symbol.iterator` 프로퍼티를 갖고 있는 이터러블 객체입니다.

``` js
const generator = (function* () {
  yield 1;
  yield 2;
})();

console.log(Symbol.iterator in generator); // true
```

따라서 `for ... of`와 spread 문법의 대상이 될 수 있습니다.

``` js
for (const v of generator) {
  console.log(v); // 1, 2
}

console.log(...generator); // 1, 2
```

### 이터레이터 iterator

제너레이터는 자기 자신의 이터레이터입니다. `next` 메서드를 사용하면 순차적으로 iterator result를 반환합니다.

``` js
const generator = (function* () {
  yield 1;
  yield 2;
})();

console.log(generator[Symbol.iterator]() === generator); // true

console.log(generator.next());
// { value: 1, done: false }
```



## 참고 자료

> - [모던 JavaScript 튜토리얼 - Generators](https://ko.javascript.info/generators)